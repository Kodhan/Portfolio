<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Soundkraft</title>

    <!-- Custom fonts for this theme -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- Theme CSS -->
    <link href="css/freelancer.css" rel="stylesheet">

</head>
<div id="page-top">



    <! --Navigation -->
    <div>
        <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand js-scroll-trigger" href="index.html#page-top">Johan's Portfolio</a>
                <button class="navbar-toggler navbar-toggler-right text-uppercase font-weight-bold bg-primary text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item mx-0 mx-lg-1">
                            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="index.html#portfolio">Portfolio</a>
                        </li>
                        <li class="nav-item mx-0 mx-lg-1">
                            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="index.html#about">About</a>
                        </li>
                        <li class="nav-item mx-0 mx-lg-1">
                            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="index.html#contact">Contact</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-to-top d-lg-none position-fixed ">
        <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top">
            <i class="fa fa-chevron-up"></i>
        </a>
    </div>
</div>
<!Main info>
<header class="masthead bg-info text-white text-center">
    <div class="container d-flex align-content-stretch flex-column">

        <iframe  class="mb-lg-4" style="height: 500px" src="img/SoundGL/index.html"></iframe>
        <!-- Masthead Avatar Image -->

        <!-- Masthead Heading -->

        <h1 class="masthead-heading text-uppercase mb-0">Sound Kraft</h1>

        <!-- Icon Divider -->
        <div class="divider-custom divider-light">
            <div class="divider-custom-line"></div>
            <div class="divider-custom-icon">
                <i class="fas fa-gamepad"></i>
            </div>
            <div class="divider-custom-line"></div>
        </div>
        <!-- Masthead Subheading -->
        <p class="masthead-subheading font-weight-light mb-0">Unity / C#</p>
        <p class="section-heading-upper mb-0">Unity Audio package</p>
    </div>
</header>
<section class="page-section portfolio" id="portfolio">
    <div class="container">
        <div class="row">
                <div class="intro-text col-md-12">
                    <h2 class="section-heading">
                        <span class="section-heading-upper"></span>
                        <span class="section-heading-lower">Why Soundkraft™?</span>
                    </h2>
                    <p class="text-muted">
                    Often when working in unity you want have sounds for things like gunshots and footsteps. And it is
                    very easy to you slap a audio source component on the object that you want to play the sound and
                    you call the “Play()” function. But this leaves some things to be desired, the same sound over and
                    over again does not sound great so maybe you start to pitch it to add some variation. Later on, you
                    realize you want more than one sound for your footsteps and you add an array of clips. The whole
                    thing gets more and more complex and the simple component you created for just playing some simple
                    footsteps has become a behemoth of a code base.  This is where SoundKraft™ comes in, it is made to
                    store all the data regarding the permutations of the sound in a simple to read scriptable object.
                    Furthermore, it utilizes an object pool to keep the amount of active audio object to an minimum. I
                    this text I will describe how I when about to create this system. If you want to download the source
                    code here is a link to the project on <a href="https://github.com/Kodhan/Soundkraft">git</a>.
                    </p>
                </div>

        </div>
        <br>
        <div class="row">
            <div class="figure-img col-md-5">
                <img class="card-img-top" src="img/portfolio/soundKraft/soundkraft_diagram.png"></img>
            </div>
            <div class="intro-text col-md-7">
                <h2 class="section-heading">
                    <span class="section-heading-upper"></span>
                    <span class="section-heading-lower">The Structure</span>
                </h2>
                <p class="text-muted">
                    As mention earlier the goal of the structure is to make the use of dynamic SFX as easy as possible
                    and as alive as possible by avoiding repetition of sounds. The data controlling the sounds is stored
                    in the audio object and it is the audio object that is the main interfacing point for the user. But if
                    they want more ingame control they can use the controller, that works a bit like a remote to a audio
                    source that is obtained from the objectpool.
                </p>
            </div>
        </div>
        <br>
        <br>
        <!--Audio Object-->
        <div class="row">
            <div class="intro-tex col-md-6">
                <h2 class="section-heading">
                    <span class="section-heading-upper"></span>
                    <span class="section-heading-lower">Audio Object</span>
                </h2>
                <p class="text-muted">
                    The audio object is a scriptable object created to hold the data regarding the random ranges and
                    values of the sounds. All the user needs to play a sound is a reference to this object and they
                    can run the Play method. The scriptable object takes care of the selecting of random clips and
                    allocating of audio objects. to avoid the same sound repeating two times I a row I implemented a
                    queuing system whereas in all the clips in the list will be played at least one time before they
                    can be played again. To give the user more control of how the sounds play each audio object can be
                    linked to a unity mixer group, this helps when the user wants to add addition effect to the sound.
                    Furthermore, all the clips are subjected to pitch and volume pitching based on the values setup here
                    in the audio object.
                </p>
            </div>
        <div class="col-md-6 ">
            <div class="col-md-15"align="center">
                <img src="img/portfolio/soundKraft/AudioObject.JPG" class="rounded" style="width: 60%">
                <br>
                <div align="center">
                    <p>
                        <a class="btn btn-primary" data-toggle="collapse" href="#collisionDetection" role="button">
                            { Audio Object } C#
                        </a>
                    </p>
                </div>
            </div>
        </div>
        <!--AudioObject code-->
        <div class="collapse col-md-15" id="collisionDetection" >
            <div class="card card-body";>
                <pre class="prettyprint lang-cs"  style="overflow: scroll">
using UnityEngine;
using UnityEngine.Audio;
using System.Collections.Generic;
using System.Collections;
using System.Linq;

namespace SoundKraft
{

    [CreateAssetMenu(fileName = "AudioObject", menuName = "AudioObject")]
    public class AudioObject : ScriptableObject
    {
        public AudioMixerGroup MixerGroup;
        public List<AudioClip> Clips;

        [MinMax(0, 1, ShowEditRange = true)] public MathHelper.FloatMinMax Volume = new MathHelper.FloatMinMax(1, 1);
        [MinMax(0, 3, ShowEditRange = true)] public MathHelper.FloatMinMax Pitch = new MathHelper.FloatMinMax(1, 1);
        [MinMax(1, 1000, ShowEditRange = true)] public Vector2 Distance = new Vector2(1, 1000);
        [Range(0, 1)] public float SpatialBlend = 1;
        public AudioRolloffMode RolloffMode = AudioRolloffMode.Logarithmic;
        public bool IsLooping;
        public bool Sound2D = true;
        [Header("Fade in")]
        public float FadeInTime = 0;
        public AnimationCurve FadeInCurve;
        [Header("Fade out")]
        public float FadeOutTime = 0;
        public AnimationCurve FadeOutCurve;

        [Header("")] public float MinSpawnInterval = 0f;
        private static AudioListener _audioListener;
        private List<int> _indexList;
        private float _lastSpawnTime;
        private AudioController _lastAvailableController;
        private Camera _camera;

        //Play the sound on specified position and transform
        public AudioController Play(Vector3 pos = default(Vector3), Transform parent = default(Transform), float delay = 0)
        {
            if (Time.time - _lastSpawnTime < MinSpawnInterval && _lastAvailableController != null)
                return _lastAvailableController;

            _lastAvailableController = ObjectPool.Instantiate(AudioSceeneObject, pos, Quaternion.identity, parent).GetComponent<AudioController>();

            _lastAvailableController.SetUp(this);
            _lastAvailableController.transform.position = pos;


            if (parent != default(Transform)) _lastAvailableController.transform.parent = parent;
            _lastSpawnTime = Time.time;
            return _lastAvailableController;
        }
        //Play the sound on the camera
        public AudioController Play()
        {
            Transform currentCameraTransform = null;

            if (Camera.current)
                currentCameraTransform = Camera.current.transform;
            else if (Camera.main)
                currentCameraTransform = Camera.main.transform;
            else if (_audioListener)
            {
                currentCameraTransform = _audioListener.transform;
            }
            else
            {
                _audioListener = FindObjectOfType<AudioListener>();
                currentCameraTransform = _audioListener.transform;
            }

            if (currentCameraTransform != null)
                return Play(currentCameraTransform.position, currentCameraTransform);

            Debug.LogError("There is no audio listener in the scene");
            return null;

        }

        public AudioClip GetClip()
        {
            if(Clips.Count < 3)
            {
                return Clips[Random.Range(0, Clips.Count)];
            }

            if (_indexList == null || _indexList.Count != Clips.Count)
            {
                _indexList = null;
                _indexList = new List<int>();
                for (int i = 0; i < Clips.Count; i++)
                {
                    _indexList.Add(i);
                }
            }

            int quarantinedIndex = Mathf.CeilToInt(Clips.Count / 3f);
            int tempIndex = _indexList[Random.Range(quarantinedIndex + 1, _indexList.Count)];

            _indexList.Remove(tempIndex);
            _indexList.Insert(0, tempIndex);

            return Clips[tempIndex];
        }

        public void TestPlay()
        {
            IEnumerable<EditorAudioTester> testerList = FindObjectsOfType<EditorAudioTester>().Where(audio => audio.IsPlayingAudioObject(this));
            if (IsLooping && testerList.ToArray().Length > 0)
            {
                foreach (var editorAudioTester in testerList)
                {
                    DestroyImmediate(editorAudioTester.gameObject);
                }
            }
            else
                new GameObject("EditorAudio(temp)").AddComponent<EditorAudioTester>().Initialize(this);
        }
    }
}
                </pre>
            </div>
        </div>
        <!--Audio Controller-->
        <div class="row">
            <div class="intro-text col-md-12">
                <h2 class="section-heading">
                    <span class="section-heading-upper"></span>
                    <span class="section-heading-lower">Audio Controller</span>
                </h2>
                <p class="text-muted">
                    The job of the controller is just that, to control the sounds that are playing. The controller takes
                    care of fading in and out the sounds and returns the audio object to objectpool when the sound is
                    done playing. The controller takes care of the actual setting of the values in the audio source, in
                    many ways the audio controller is the interface for the audio source. The user should never change
                    the actual audio source by them self’s, instead all of that is handled trough the controller. Every
                    time the play function is called from the audio object a instance of the controller is created as a
                    form of remote for the user to access and change sounds on the fly.
                </p>
            </div>
        </div>
    </div>

</section>
<!-- Bootstrap core JavaScript -->
<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
<div class="scroll-to-top d-lg-none position-fixed ">
    <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top">
        <i class="fa fa-chevron-up"></i>
    </a>
</div>
<footer class="footer">

</footer>

</body>
</html>

<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?skin=desert"></script>